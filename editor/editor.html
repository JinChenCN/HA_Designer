
<!DOCTYPE html>
<html>
<!--Copyright 2010 Scriptoid s.r.l-->
<head>
    <title>HTML5 diagram editor</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script type="text/javascript" src="./assets/javascript/dropdownmenu.js"></script>

    <link rel="stylesheet" media="screen" type="text/css" href="./assets/css/style.css" />
    <link rel="stylesheet" media="screen" type="text/css" href="./assets/css/minimap.css" />

    <script type="text/javascript" src="./assets/javascript/json2.js"></script>
    <script type="text/javascript" src="./assets/javascript/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="./assets/javascript/ajaxfileupload.js"></script>

    <link type='text/css' href='./assets/simplemodal/css/diagramo.css' rel='stylesheet' media='screen' />
    <script type="text/javascript" src="./assets/simplemodal/js/jquery.simplemodal.js"></script>

    <style>
        a.tryitbtn {
            font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;
            display: inline-block;
            color: #FFFFFF;
            background-color: #8AC007;
            font-size: 15px;
            text-align: center;
            padding: 5px 16px;
            text-decoration: none;
            margin-left: 0;
            margin-top: 0px;
            margin-bottom: 5px;
            border: 1px solid #8AC007;
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }
    </style>
    <script type="text/javascript">
        "use strict";
        /*Option 1:
         *We can use window.location like this:
         * url = window.location.protocol + window.location.hostname + ":" + window.location.port + ....
         * @see http://www.w3schools.com/jsref/obj_location.asp
         *
         * Option 2:
         * Use http://code.google.com/p/js-uri/
         **/
        var appURL = '<?=$WEBADDRESS?>';
        var figureSetsURL = appURL + '/editor/lib/sets';
        var insertImageURL = appURL + '/editor/data/import/';

        function checkAll(source) {
            var checkboxes = document.getElementsByName('ExposeInterfaceCheckBox');
            for(var i=0, n=checkboxes.length;i<n;i++) {
            checkboxes[i].checked = source.checked;
          }
        }

        function showImport() {
            //alert("ok");
            var r = confirm("Current diagram will be deleted. Are you sure?");
            if (r === true) {
                $('#import-dialog').modal(); // jQuery object; this demo
            }
        }
    </script>

    <script type="text/javascript" src="./lib/dashed.js"></script>
    <script type="text/javascript" src="./lib/canvasprops.js"></script>
    <script type="text/javascript" src="./lib/style.js"></script>
    <script type="text/javascript" src="./lib/primitives.js"></script>
    <script type="text/javascript" src="./lib/ImageFrame.js"></script>
    <script type="text/javascript" src="./lib/matrix.js"></script>
    <script type="text/javascript" src="./lib/util.js"></script>
    <script type="text/javascript" src="./lib/key.js"></script>
    <script type="text/javascript" src="./lib/groups.js"></script>
    <script type="text/javascript" src="./lib/stack.js"></script>
    <script type="text/javascript" src="./lib/connections.js"></script>
    <script type="text/javascript" src="./lib/connectionManagers.js"></script>
    <script type="text/javascript" src="./lib/handles.js"></script>


    <script type="text/javascript" src="./lib/builder.js"></script>
    <script type="text/javascript" src="./lib/text.js"></script>
    <script type="text/javascript" src="./lib/log.js"></script>
    <script type="text/javascript" src="./lib/text.js"></script>
    <script type="text/javascript" src="./lib/browserReady.js"></script>
    <script type="text/javascript" src="./lib/containers.js"></script>
    <script type="text/javascript" src="./lib/importer.js"></script>
    <script type="text/javascript" src="./lib/main.js"></script>
    <script type="text/javascript" src="./lib/opode.js"></script>
    <script type="text/javascript" src="./lib/opInputEvent.js"></script>
    <script type="text/javascript" src="./lib/opOutputEvent.js"></script>
    <script type="text/javascript" src="./lib/opExternalVarableInput.js"></script>
    <script type="text/javascript" src="./lib/opExternalVarableOutput.js"></script>
    <!--<script type="text/javascript" src="./lib/FileSaver.js"></script>
    <script type="text/javascript" src="./lib/Blob.js"></script> */ -->

    <script type="text/javascript" src="./lib/sets/basic/basic.js"></script>
    <!-- <script type="text/javascript" src="./lib/sets/experimental/experimental.js"></script>
     <script type="text/javascript" src="./lib/sets/network/network.js"></script>
     <script type="text/javascript" src="./lib/sets/secondary/secondary.js"></script>
     <script type="text/javascript" src="./lib/sets/statemachine/statemachine.js"></script>-->

    <script type="text/javascript" src="./lib/minimap.js"></script>

    <script type="text/javascript" src="./lib/commands/History.js"></script>

    <script type="text/javascript" src="./lib/commands/FigureCreateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/FigureCloneCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/FigureTranslateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/FigureRotateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/FigureScaleCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/FigureZOrderCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/FigureDeleteCommand.js"></script>

    <script type="text/javascript" src="./lib/commands/GroupRotateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/GroupScaleCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/GroupCreateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/GroupCloneCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/GroupDestroyCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/GroupDeleteCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/GroupTranslateCommand.js"></script>


    <script type="text/javascript" src="./lib/commands/ContainerCreateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/ContainerDeleteCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/ContainerTranslateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/ContainerScaleCommand.js"></script>

    <script type="text/javascript" src="./lib/commands/ConnectorCreateCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/ConnectorDeleteCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/ConnectorAlterCommand.js"></script>

    <script type="text/javascript" src="./lib/commands/ShapeChangePropertyCommand.js"></script>

    <script type="text/javascript" src="./lib/commands/CanvasChangeColorCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/CanvasChangeSizeCommand.js"></script>
    <script type="text/javascript" src="./lib/commands/CanvasFitCommand.js"></script>

    <script type="text/javascript" src="./lib/commands/InsertedImageFigureCreateCommand.js"></script>
    <script type="text/javascript" src="./assets/javascript/colorPicker_new.js"></script>

    <script type="text/javascript" src="./lib/saveAs/Blob.js"></script>
    <script type="text/javascript" src="./lib/saveAs/canvas-toBlob.js"></script>
    <script type="text/javascript" src="./lib/saveAs/FileSaver.js"></script>
    <!--  <script type="text/javascript" src="./lib/saveAs/fileSaverdemo.js" ></script> -->

    <link rel="stylesheet" media="screen" type="text/css" href="./assets/css/colorPicker_new.css" />

       <!--  <script type="text/javascript">
        function delegateFilePickup() {
            if(DIAGRAMO.interfaceMode) {
                document.getElementById("fileToOpenDiagram").setAttribute("multiple", "multiple");
            }         
            document.getElementById("fileToOpenDiagram").click();
            document.getElementById('fileToOpenDiagram').addEventListener('change', fileToReload, false);

        }

        function fileToReload(evt) {
            var files = document.getElementById('fileToOpenDiagram').files;
            if (!files.length) {
                alert('Please select a file!');
                return;
            }

            var file = files[0];
            //  var start = parseInt(opt_startByte) || 0;
            //  var stop = parseInt(opt_stopByte) || file.size - 1;
            var reader = new FileReader();
            reader.readAsText(file);
            // If we use onloadend, we need to check the readyState.
            reader.onloadend = function (evt1) {
                if (evt1.target.readyState == FileReader.DONE) { // DONE == 2
                    // document.getElementById('outputStr2').textContent = evt1.target.result
                    // alert ( evt.target.result );
                    loadModelFromLocal(evt1.target.result);
                }
            };

            //   var blob = file.slice(start, stop + 1);
            //   reader.readAsBinaryString(blob);


        }




    </script> -->


    <!--[if IE]>
    <script src="./assets/javascript/excanvas.js"></script>
    <![endif]-->

</head>
<body onload="init('');" id="body">



    <div id="actions">



        <a style="text-decoration: none;" href="#" onclick="return save();" title="Save diagram (Ctrl-S)"><img src="assets/images/icon_save.jpg" border="0" width="16" height="16" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a style="text-decoration: none;" href="#" onclick="return exportJasons();" title="Export to JSON"><img src="assets/images/icon_export.jpg" border="0" width="16" height="16" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a href="javascript:action('show-design');" title="Open diagram"><img src="assets/images/icon_open.jpg" border="0" width="16" height="16" /></a>

        <a style="text-decoration: none;" style="display:none" href="#" title="Open diagram" onclick="return delegateFilePickup()">
            <input type="file" style="display:none" id="fileToOpenDiagram" />
        </a>



        <!-- <?if(isset($_REQUEST['diagramId']) &&  is_numeric($_REQUEST['diagramId']) ){//option available ony when the diagram was saved?>
              <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16"/>
              <a style="text-decoration: none;" href="#" onclick="return print_diagram();" title="Print diagram"><img src="assets/images/icon_print.png" border="0" width="16" height="16"/></a>
          <?}?> -->
        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a style="text-decoration: none;" href="#" onclick="return saveInterface();" title="Save interface"><img src="assets/images/saveInterface.jpeg" border="0" width="16" height="16" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a href="javascript:action('connector-straight');" title="Straight connector"><img src="assets/images/icon_connector_straight.gif" border="0" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <img class="separator" src="assets/images/toolbar_separator.gif" style="display:none" border="0" width="1" height="16" />

        <a href="javascript:action('connector-jagged');" title="Jagged connector"><img src="assets/images/icon_connector_jagged.gif" border="0" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <img class="separator" src="assets/images/toolbar_separator.gif" style="display:none" border="0" width="1" height="16" />

        <a href="javascript:action('connector-organic');" style="display:none" title="Organic connector"><img src="assets/images/icon_connector_organic.gif" border="0" alt="Organic" /></a>

         <!--<img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a href="javascript:action('container');" style="display:none" title="Container (Experimental)"><img src="assets/images/container.png" border="0" alt="Container" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />-->

        <a href="javascript:action('show-interface');" title="Interface mode"><img src="assets/images/interface-mode.png" border="0" /></a>

        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a style="display:none" href="javascript:action('front');" title="Move to front"><img src="assets/images/icon_front.gif" border="0" /></a>

        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a style="display:none" href="javascript:action('back');" title="Move to back"><img src="assets/images/icon_back.gif" border="0" /></a>

        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a style="display:none" href="javascript:action('moveforward');" title="Move (one level) to front"><img src="assets/images/icon_forward.gif" border="0" /></a>

        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a style="display:none" href="javascript:action('moveback');" title="Move (one level) back"><img src="assets/images/icon_backward.gif" border="0" /></a>



        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />
        <a style="display:none" href="javascript:action('group');" title="Group (Ctrl-G)"><img src="assets/images/group.gif" border="0" /></a>

        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />
        <a style="display:none" href="javascript:action('ungroup');" title="Ungroup (Ctrl-U)"><img src="assets/images/ungroup.gif" border="0" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a href="javascript:createFigure(figure_Text, 'assets/images/text.gif');" title="Add text"><img src="assets/images/text.gif" border="0" height="16" /></a>
        <img style="display:none" class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />

        <a href="javascript:action('undo');" title="Undo (Ctrl-Z)"><img src="assets/images/arrow_undo.png" border="0" /></a>

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />
        Model Name:

        <input type="text" id="txtModelName" value="Model Name" width="120" />

        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16" />
        
        <a class="tryitbtn" href="#"
           onclick="javascript: CNTRL_PRESSED ? CNTRL_PRESSED = false : CNTRL_PRESSED = true; alert('Current Ctrl Pressed State:' + CNTRL_PRESSED);">Handle The Ctrl State</a>
        <!--
        <img class="separator" src="assets/images/toolbar_separator.gif" border="0" width="1" height="16"/>
        <a href="javascript:action('redo');" title="Redo (Ctrl-Y)"><img src="assets/images/arrow_redo.png" border="0"/></a>
        -->
        <!-- TODO: From Janis: we have to create a nice icon for duplicate, currently this is the only command without an icon -->
        <!--
        <a href="javascript:action('duplicate');">Copy (Ctrl-D)</a>
        -->
        <!--
        <input type="text" id="output" />
        <img style="vertical-align:middle;" src="../assets/images/toolbar_separator.gif" border="0" width="1" height="16"/>
        <a href="javascript:action('duplicate');">Copy</a>
        <img style="vertical-align:middle;" src="../assets/images/toolbar_separator.gif" border="0" width="1" height="16"/>
        <a href="javascript:action('group');">Group</a>
        <img style="vertical-align:middle;" src="../assets/images/toolbar_separator.gif" border="0" width="1" height="16"/>
        <a href="javascript:action('ungroup');">Ungroup</a>
        -->
    </div>


    <div id="editor">
        <div id="figures">
          <!-- <select style="width: 120px;" onchange="setFigureSet(this.options[this.selectedIndex].value);">
                <script>
                    "use strict";
                    for (var setName in figureSets) {
                        var set = figureSets[setName];
                        document.write('<option value="' + setName + '">' + set['name'] + '</option>');
                    }
                </script>
            </select> --> 

            <script>
                "use strict";
                /**Builds the figure panel*/
                function buildPanel() {
                    //var first = true;
                    var firstPanel = true;
                    for (var setName in figureSets) {
                        var set = figureSets[setName];

                        //creates the div that will hold the figures
                        var eSetDiv = document.createElement('div');
                        eSetDiv.setAttribute('id', setName);
                        //eSetDiv.style.border = '1px solid green';
                        if (firstPanel) {
                            firstPanel = false;
                        }
                        else {
                            eSetDiv.style.display = 'none';
                        }
                        document.getElementById('figures').appendChild(eSetDiv);

                        //add figures to the div
                        for (var figure in set['figures']) {
                            figure = set['figures'][figure];

                            var figureFunctionName = 'figure_' + figure.figureFunction;
                            var figureThumbURL = 'lib/sets/' + setName + '/' + figure.image;

                            var eFigure = document.createElement('img');
                            eFigure.setAttribute('src', figureThumbURL);

                            eFigure.addEventListener('mousedown', function (figureFunction, figureThumbURL) {
                                return function (evt) {
                                    evt.preventDefault();
                                    //Log.info("editor.php:buildPanel: figureFunctionName:" + figureFunctionName);

                                    createFigure(window[figureFunction] /*we need to search for function in window namespace (as all that we have is a simple string)**/
                                        , figureThumbURL);
                                };
                            }(figureFunctionName, figureThumbURL)
                            , false);

                            //in case use drops the figure
                            eFigure.addEventListener('mouseup', function () {
                                createFigureFunction = null;
                                selectedFigureThumb = null;
                                state = STATE_NONE;
                            }
                            , false);


                            eFigure.style.cursor = 'pointer';
                            eFigure.style.marginRight = '5px';
                            eFigure.style.marginTop = '2px';

                            eSetDiv.appendChild(eFigure);
                        }
                    }
                }

                buildPanel();

                //                    var first = true;
                //                    for(var setName in figureSets){
                //
                //                        document.write('<div id="' + setName + '" ' + (!first ? 'style="display: none"' : '')+'>');
                //                        document.write('<table border="0" cellpadding="0" cellspacing="0" width="120">');
                //                        var counter = 0;
                //                        var set = figureSets[setName];
                //                        for(var figure in set['figures']){
                //                            figure = set['figures'][figure];
                //                            if(counter % 3 == 0){
                //                                document.write('<tr>');
                //                            }
                //
                //                            var figureFunctionName = 'figure_' + figure.figureFunction;
                //                            var figureThumbURL = 'lib/sets/' + setName + '/' + figure.image;
                //
                //                            document.write('<td align="center">');
                //                            document.write('<a href="javascript:createFigure(' + figureFunctionName + "," + "'" + figureThumbURL + "'" + ');">');
                //
                //                            //TODO: how to prevent default behaviour?
                //                            var figureImageId = 'fig' + setName + '_' + figure.figureFunction;
                //                            document.write('<img id="' + figureImageId +'" onmousedown="javascript:createFigure(' + figureFunctionName + "," + "'" + figureThumbURL + "'" + ');" src="' + figureThumbURL + '" border="0" alt="'+ figure.figureFunction + '" />');
                //
                //                            var figureImageElem = document.getElementById(figureImageId);
                //                            figureImageId.onMouseDown = function(evt){
                //                                alert('I am here');
                //                                evt.preventDefault();
                //                            }
                //
                //                            //document.write('</a>');
                //                            document.write('</td>');
                //
                //                            counter ++;
                //                            if(counter % 3 == 0){
                //                                document.write('</tr>');
                //                            }
                //                        }
                //                        if(counter % 3 != 0){
                //                            document.write('</tr>');
                //                        }
                //                        document.write('</table></div>');
                //                        first = false;
                //                    }
            </script>

            <div style="display:none;" id="more">
                More sets of figures <a href="http://diagramo.com/figures.php" target="_new">here</a>
            </div>
        </div>

        <!--THE canvas-->
        <div style="width: 100%">
            <div id="container">
                <canvas id="a" width="800" height="500">
                    Your browser does not support HTML5. Please upgrade your browser to any modern version.
                </canvas>
                <div id="text-editor">

                </div>
                <div id="text-editor-tools"></div>
                <div width="100%" id = "interface-exposure" style= "display: none">
                    <table>
                    <tr>
                        <a class="tryitbtn" href="#"> Make interface hide or expose </a>
                        <hr />
                    </tr>
                    <tr>
                        <div style="padding-left:30px"> <input type="checkbox" onClick="checkAll(this)"/> Check All</p> </div>
                        <div id="interface-exposure-check" style="padding-left:30px">
                        </div>
                    <hr />
                    </tr>
                </table>
                </div>
                <table width="100%" id="edit-area">
                    <tr>

                        <td id="outputStr1">
                            <table style="width:100%">
                                <tr  >
                                    <th colspan="1" align="left">Helper</th>
                                    <th colspan="1" align="left">
                                        <a class="tryitbtn" href="#"
                                           onclick="addOptionsForOption_paras();">refresh the options &raquo;</a>
                                    </th>
                                    <th colspan="1" align="left">
                                        <a style="display:none"  class="tryitbtn" href="#"
                                           onclick="returnStackFigureLength();">Collect Information &raquo;</a>
                                    </th>
                                    <th colspan="1" align="left">
                                        <a style="display:none"  class="tryitbtn" href="#"
                                           onclick="returnModelInfoInJasonFormat();">alert Information &raquo;</a>
                                    </th>

                                </tr>
                            </table>
                            <hr />
                            <table style="width:100%">
                            <tr>
                                <th colspan="1" align="left">Interface</th>                                  
                            </tr>
                            <tr>
                                <th style="width:50%; text-align: left; padding-top: 10px">External Variables Input        
                                    <input type="button" value="+External Varable Input" onclick="addExternalVarableInput();" /> 
                                    <input type="button" value="showS" style="display:none" onclick="collectExternalVarableInputStr()" />
                                </th>                             
                         <td></td>
                            </tr>
                         <td style="width:100%" >      
                            <div>  </div>
                            <div id="ExternalVarableInputPanel">
                                <div id="ExternalVarableInputDiv1">
                                    <label id="lbExternalVarableInput1"> External Varable Input 1 </label> 
                                    <select id="ExternalVarableInputValueType1">
                                      <option value="ANY">ANY</option>
                                      <option value="BOOL">BOOL</option>
                                      <option value="BYTE">BYTE</option>
                                      <option value="DATE_AND_TIME">DATE_AND_TIME</option>
                                      <option value="DINT">DINT</option>
                                      <option value="DWORD">DWORD</option>
                                      <option value="INT">INT</option>
                                      <option value="LINT">LINT</option>
                                      <option value="LREAL">LREAL</option>
                                      <option value="LWORD">LWORD</option>
                                      <option value="REAL">REAL</option>
                                      <option value="SINT">SINT</option>
                                      <option value="STRING">STRING</option>
                                      <option value="TIME">TIME</option>
                                      <option value="UDINT">UDINT</option>
                                      <option value="UINT">UINT</option>
                                      <option value="ULINT">ULINT</option>
                                      <option value="USINT">USINT</option>
                                      <option value="WORD">WORD</option>
                                      <option value="WSTRING">WSTRING</option>
                                     </select>
                                     <input id="txtExternalVarableInput1"  style="width:75px" onchange="checkVarNames(this)"/> 
                                     <input id="txtExternalVarableInputValue1"  style="width:100px" /> 
                                    <input type="button" onclick="removeExternalVarableInput(1)" id="btnExternalVarableInput1" style="width:50px" value="Delete" />
                                </div>
                            </div>

                        </td>
                        <tr>
                                <th style="width:50%; text-align: left; padding-top: 10px">External Variables Output        
                                    <input type="button" value="+External Varable Output" onclick="addExternalVarableOutput();" /> 
                                    <input type="button" value="showS" style="display:none" onclick="collectExternalVarableOutputStr()" />
                                </th>                             
                         <td></td>
                            </tr>
                            <td style="width:100%" > 
                                    
                            <div>  </div>
                            <div id="ExternalVarableOutputPanel">
                                <div id="ExternalVarableOutputDiv1">
                                    <label id="lbExternalVarableOutput1"> External Varable Output 1 </label> 
                                    <select id="ExternalVarableOutputValueType1">
                                      <option value="ANY">ANY</option>
                                      <option value="BOOL">BOOL</option>
                                      <option value="BYTE">BYTE</option>
                                      <option value="DATE_AND_TIME">DATE_AND_TIME</option>
                                      <option value="DINT">DINT</option>
                                      <option value="DWORD">DWORD</option>
                                      <option value="INT">INT</option>
                                      <option value="LINT">LINT</option>
                                      <option value="LREAL">LREAL</option>
                                      <option value="LWORD">LWORD</option>
                                      <option value="REAL">REAL</option>
                                      <option value="SINT">SINT</option>
                                      <option value="STRING">STRING</option>
                                      <option value="TIME">TIME</option>
                                      <option value="UDINT">UDINT</option>
                                      <option value="UINT">UINT</option>
                                      <option value="ULINT">ULINT</option>
                                      <option value="USINT">USINT</option>
                                      <option value="WORD">WORD</option>
                                      <option value="WSTRING">WSTRING</option>
                                     </select>
                                    <input id="txtExternalVarableOutput1" style="width:75px" onchange="checkVarNames(this)"/> 
                                    <input id="txtExternalVarableOutputValue1"  style="width:100px" />
                                    <input type="button" onclick="removeExternalVarableOutput(1)" id="btnExternalVarableOutput1" style="width:50px" value="Delete" />
                                </div>
                            </div>

                        </td>
                            <tr>
                                <th style="width:50%; text-align: left; padding-top: 10px">Input Events 
                                    <input type="button" value="+Input Event" onclick="addInputEvent();" /> 
                                    <input type="button" value="showS" style="display:none" onclick="collectInputEventStr()" />
                                </th>                             
                         <td></td>
                            </tr>
                         <td> 
                                    
                            <div>  </div>
                            <div id="inputEventPanel">
                                <div id="inputEventDiv1">
                                    <label id="lbinputEvent1"> Input Event 1 </label> 
                                     <select id="inputEventType1">
                                      <option value="Event">EVENT</option>
                                      <option value="Any">ANY</option>
                                      <option value="Custom">CUSTOM</option>
                                     </select>                               
                                    <input id="txtinputEvent1" style="width:100px"  onchange="checkEventNames(this)"/>    
                                    <input type="button" onclick="removeinputEvent(1)" id="btnInputEvent1" style="width:50px" value="Delete" />
                                    <div id="inputEventValues1" style="padding-left:30px">
                                        <label> Associated Values: </label> <br>
                                    <input type="checkbox" id="inputEventValue1variable1" name="ExternalVarableInput1" value="ExternalVarableInput1"><label id="lbinputEventValue1check1">External Varable Input 1<br></label>
                                </div>
                                </div>
                            </div>

                        </td>
                            <tr>
                                <th style="width:50%; text-align: left; ; padding-top: 10px">Output Events 
                                    <input type="button" value="+Output Event" onclick="addoutputEvent();" /> 
                                    <input type="button" value="showS" style="display:none" onclick="collectoutputEventStr()" />
                                </th>
                         <td></td>
                            </tr>
                         <tr>

                         <td>                                    
                            <div>  </div>
                            <div id="outputEventPanel">
                                <div id="outputEventDiv1">
                                    <label id="lboutputEvent1"> Output Event 1 </label> 
                                    <select id="outputEventType1">
                                      <option value="Event">EVENT</option>
                                      <option value="Any">ANY</option>
                                      <option value="Custom">CUSTOM</option>
                                     </select> 
                                     <input id="txtoutputEvent1" style="width:100px" onchange="checkEventNames(this)"/>                                   
                                    <input type="button" onclick="removeoutputEvent(1)" id="btnoutputEvent1" style="width:50px" value="Delete" />
                                    <div id="outputEventValues1", style="padding-left:30px">
                                        <label> Associated Values: </label> <br>
                                    <input type="checkbox" id="outputEventValue1variable1" name="ExternalVarableOutput1" value="ExternalVarableOutput1"><label id="lboutputEventValue1check1">External Varable Output 1<br></label> 
                                </div>
                                </div>
                            </div>

                        </td>
                                </tr>
                </table>
                            <hr />
                     <table width="100%">
                                <tr>
                                    <th style=" text-align:left" >
                                        edges: options
                                    </th>
                                    <td colspan="5">

                                        <select id="option_paras_edges" style="width:250px" onchange="showModelParameterVal('edge', this.options[this.selectedIndex].value)">
                                            <option value="">-=please select  edges=-</option>
                                        </select>
                                    </td>
                                    <td></td>
                                </tr>
                         <tr>
                                    <th style="width:10%">name</th>
                                    <th style="width:15%; display:none">Invariant</th>
                                    <th style="width:15%">Guard</th>
                                    <th style="width:15%">Event</th>
                                    <th style="width:15%">Update</th>
                                    <th style="display:none">Others</th>
                             <td></td>
                                </tr>
                                <tr>
                                   
                                    <td>
                                        <input type="text" id="txtEdgeName" value="name" />

                                    </td>
                                    <td style="display:none">
                                        <textarea id="txtAreaEdgeInvariant">   </textarea>

                                    </td>
                                    <td>
                                        <textarea id="txtAreaEdgeGuard">  </textarea>
                                    </td>
                                    <td>
                                        <textarea id="txtAreaEdgeEvent">  </textarea>
                                    </td>
                                    <td>
                                        <textarea id="txtAreaEdgeUpdate">  </textarea>
                                    </td>

                                    <td style="display:none ">
                                        <textarea id="txtAreaEdgeOthers">  </textarea>
                                    </td>
                                    <td>
                                        <a class="tryitbtn" href="#"
                                           onclick="setModelParameterVal('edge', document.getElementById('option_paras_edges').options[document.getElementById('option_paras_edges').selectedIndex].value)">save</a>
                                    </td>
                                </tr>
                            </table>
                            <hr />
                            <table width="100%">
                                <tr>
                                    <th colspan="5" style=" text-align:left">
                                        locations:options
                                     
                                        <select id="option_paras_locations" style="width:200px"
                                                onchange="showModelParameterVal('location', this.options[this.selectedIndex].value)">
                                            <option value="">-=please select locations=-</option>
                                        </select>
                                    </td>
                                    <td></td>
                                </tr>
                                <tr>
                                   
                                    <th style="width:70px">name</th>
                                    <th style="width:10%">isStart</th>
                                    <th style="width:20%">Invariant</th>
                                    <th  >Ode
                                        <input type="button" value="+Ode" onclick="addOde();" /> 
                                     <input type="button" value="showS" style="display:none" onclick="collectOdeStr()" />
                                    </th>
                                    <th style="width:100px">Initial Value</th>
                                     
                                    <th style="display:none ">Others</th>
                                    <td></td>
                                </tr>
                                <tr>
                                   
                                   
                                   
                                    <td>
                                        <input type="text" style="width:100px" id="txtLocationName" value="name" />
                                    </td>
                                    <td>
                                        <input type="radio" name="isstartlocation" value="yes"> yes <br>
                                        <input type="radio" name="isstartlocation" value="no"> no <br>
                                        <input type="radio" name="isstartlocation" value="undefined" checked> undefined
                                    </td>
                                    <td> <textarea id="txtAreaLocationInvariant">  x<=20 </textarea> </td>
                                    <td> <!-- <textarea id="txtAreaLocationGuard"> x<=10,x>=1 </textarea> -->
                                    
                                        <datalist id="ode_list">
                                            <option value="ode1" />
                                        </datalist>
                                        <div>  </div>
                                        <div id="odePanel">
                                            <div id="odeDiv1">
                                                <label id="lblode1"> ode1 </label> <input id="txtOde1" style="width:200px" /> 
                                                 <input type="url" style="width:70px" id="txtDependence1" list="ode_list" name="link" /> 
                                                <input type="button" onclick="removeOde(1)" id="btnRemoveOde1" style="width:50px" value="Delete" />
                                            </div>
                                        </div>

                                    </td>

                                    <td>
                                        <input type="text" style="width:100px" id="txtLocationInit" value="" />
                                    </td>

                                    <td style="display:none ">
                                        <textarea id="txtAreaLocationOthers">  </textarea>
                                    </td>
                                    <td>
                                        <a class="tryitbtn" href="#"
                                           onclick="setModelParameterVal('location', document.getElementById('option_paras_locations').options[document.getElementById('option_paras_locations').selectedIndex].value)">save</a>
                                    </td>

                                </tr>

                            </table>

                            <hr />
                        </td>







                    </tr>


                </table>
            </div>



        </div>

        <!--Right panel-->
        <div id="right">
            <center>
                <div id="minimap">
                </div>
            </center>
            <div style="overflow: scroll;" id="edit">



            </div>
        </div>

    </div>

    <!--The import panel-->
    <div id="import-dialog" style="background-color: white; display: none; margin-top: auto; margin-bottom: auto;">
        <form action="./common/controller.php" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="action" value="importDiagramExe" />
            <h2>Import Diagramo file </h2>
            <p />
            <input type="file" name="diagramFile" id="diagramFile" />
            <p />
            <input type="image" src="./assets/images/import.gif" />
        </form>
    </div>

    <!--Insert Image dialog content-->
    <div id="insert-image-dialog">
        <h2>Insert Image</h2>
        <form action="./common/controller.php" method="POST" target="upload_target" enctype="multipart/form-data">
            <input type="hidden" name="action" value="insertImage" />
            <div class="insert-image-line">
                <input type="radio" name="image-group" value="URL" checked>
                <label>From URL:</label>
                <input type="text" class="url-input" name="imageURL" id="imageURL" />
            </div>
            <div class="insert-image-line">
                <input type="radio" name="image-group" value="Upload">
                <label>Upload:</label>
                <input type="file" class="right-offset" name="imageFile" id="imageFile" />
            </div>
            <div class="insert-image-line">
                <input type="radio" name="image-group" value="Reuse" id="insert-image-reuse-group">
                <label>Reuse:</label>
                <select id="insert-image-reuse" name="reuseImageFile"></select>
            </div>
            <div id="upload-image-error">
            </div>
            <div class="submit-container">
                <input type="submit" value="Insert" />
            </div>
        </form>
    </div>

    <!--Insert Image hidden iframe-->
    <iframe id="upload_target" name="upload_target" style="width:0;height:0;border:0px;"></iframe>

    <script type="text/javascript">
        "use strict";
        function loadFill(check) {
            if (check.checked === true) {
                if ($('#colorpickerHolder3').css('display') === 'none') {
                    $('#colorSelector3').click();
                }
            }
            else {
                if ($('#colorpickerHolder3').css('display') === 'block') {
                    $('#colorSelector3').click();
                }
            }
        }
    </script>
    <br />
    <!--   <? //require_once dirname(__FILE__) . '/common/analytics.php';?>-->
</body>
</html>
